<ion-view title="New Report">
    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon" style="color: #fff;"></button>

    </ion-nav-buttons>

    <ion-content class="normalPage">

        <div class="row row-center">
            <div class="col center">
                <p class="info">Enter the details for your Report</p>

            </div>
        </div>

        <div class="row row-center" ng-if="!categories">
            <div class="col center">
                <p class="info">Loading Categories</p>

            </div>
        </div>
        <div class="animate-if" ng-if="alertBad">
            <div class="report-message">
                <p class="alert">
                    {{message}}
                </p>
                <hr style="opacity: 0.2;" />
                <a href="#/app/home" class="button button-block button-positive toggle">Done</a>
            </div>
        </div>
        <div class="animate-if" ng-if="alertGood">
            <div class="report-message">
                <p class="success">
                    {{message}}

                </p>
                <hr style="opacity: 0.2;" />
                <a href="#/app/home" class="button button-block button-positive toggle">Done</a>
            </div>
        </div>


        <form ng-if="!success">
                      <div class="list list-inset" ng-if="categories">
                <label class="item item-input item-select">
                    <div class="input-label">
                        Main Category
                    </div>

                    <select ng-options="category as category.name for category in categories" ng-model="cat.selected" ng-change="update()" required="true">
                        <option value="?">Select A Category</option>
                    </select>
                </label>
            </div>
            <div class="list list-inset" ng-if="subs">
                <label class="item item-input item-select">
                    <div class="input-label">
                        Sub Category
                    </div>

                    <select ng-options="sub as sub.name for sub in subs" ng-model="Sub.selected" ng-change="updateSub()">
                        <option value="?">Select A Sub Category</option>
                        <option ng-repeat="sub in subs" value="{{sub.name}}">{{sub.name}}</option>
                    </select>
                </label>
            </div>
            <div class="list list-inset" ng-if="subsubs">
                <label class="item item-input item-select">
                    <div class="input-label">
                        Sub Sub Category
                    </div>

                    <select ng-model="report.sub_sub_category" ng-options="sub as sub.name for sub in subsubs" >
                    </select>
                </label>
            </div>

            <div class="list list-inset">
                <label class="item item-input  item-stacked-label">
                    <div class="input-label">
                        Report Description
                    </div>
                    <!--  <i class="icon ion-person placeholder-icon"></i> -->
                    <textarea ng-model="report.description" required placeholder="Enter Your Description"></textarea>
                    <!--  <input type="text" placeholder="John Doe" ng-model="user.name" required> -->
                </label>
            </div>

            <div class="list list-inset">
                <label class="item item-input item-select">
                    <div class="input-label">
                        Case Priority
                    </div>

                <select ng-options="priority for priority in ['Normal', 'Critical']" ng-model="priorityM" ng-change="prior(priorityM)">
                    <option value="" selected>--Please select case your priority--</option>
                </select
                </label>
            </div>

            <div class="list list-inset inb">

                <div class="uplod" ng-init="showMessage = false">

                    <!--  <i class="icon ion-person placeholder-icon"></i> -->
                     <input type="file" ng-model="img" accept="image/*" ng-change="showMessage = true" id="FileInput" style="position:absolute; left: -1000px;">



                    <!--    <button class="button button-block button-positive toggle" ng-click="takePhoto()"><i class="ion-camera" style="font-size: 48px;"></i>
                    </button> -->


                    <button class="button button-block button-positive toggle btn-50" ng-click="takePhoto()" style="max-width: 100% !important;display:inline-block;"><i class="ion-camera" style="font-size: 48px;"></i>
                    </button>





                   <!--  <button ng-if="!hideGal" class="button button-block button-positive toggle activated btn-50" ng-click="pickPhoto()" style="max-width: 45% !important;float: right;display: inline; margin-left: 13px;"><i class="ion-image" style="font-size: 48px;"></i>
                    </button> -->





                    <!--  <input type="text" placeholder="John Doe" ng-model="user.name" required> -->
                </div>
                <p class="uploadMessage" ng-if="showMessage">File Selected</p>
            </div>
            <div class="row">

                <div class="col-50"  ui-sref="app.map({map:'34'})">
                    <img src="http://maps.google.com/maps/api/staticmap?center={{report.gps_lat}},{{report.gps_lng}}&zoom=16&size=200x100&markers=color:red%7Clabel:0%7C{{report.gps_lat}},{{report.gps_lng}}&sensor=TRUE_OR_FALSE" style="margin-left:auto;margin-right:auto;display:block" width="100%" height="100px">
                </div>
                <div class="col-50">
                    <img ng-src="{{imgSrc}}" width="100%" height="100px" ng-if="img">
                </div>
            </div>
            <div class="list list-inset inb">
                <button class="button button-block button-positive toggle" ui-sref="app.map({map:'34'})">Geotag</button>
            </div>
        </form>



    </ion-content>
</ion-view>
